<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>250 - feTurbulence Lab</title>
    <style>
      :root {
        background-color: thistle;
      }

      body {
        display: flex;
        flex-flow: row wrap;
        gap: 20px;
        margin: 0;
        padding: 20px;
      }

      rect {
        width: 100%;
        height: 100%;
        fill: white;
        filter: url(#filter-1);
      }
    </style>
  </head>
  <body>
    <svg>
      <rect />
    </svg>
    <script>
      function createSVGElement(elName) {
        return document.createElementNS('http://www.w3.org/2000/svg', elName);
      }
      function handleDOMContentLoaded() {
        for (let index = 0; index < 10; index += 1) {
          const svgEl = createSVGElement('svg');
          const rectEl = createSVGElement('rect');
          const filterEl = createSVGElement('filter');
          const turbulenceEl = createSVGElement('feTurbulence');
          const defsEl = createSVGElement('defs');
          filterEl.setAttribute('id', `filter-${index}`);
          turbulenceEl.setAttribute('baseFrequency', '0.05');
          rectEl.setAttribute('filter', `url(#filter-${index})`);
          defsEl.append(filterEl);
          filterEl.append(turbulenceEl);
          svgEl.append(defsEl);
          svgEl.append(rectEl);
          document.body.prepend(svgEl);
        }
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', handleDOMContentLoaded);
      } else {
        handleDOMContentLoaded();
      }
    </script>
  </body>
</html>
